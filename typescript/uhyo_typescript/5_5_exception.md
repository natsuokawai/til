# 5.5 例外処理
例外＝ランタイムエラー ⇔ コンパイルエラー

## 5.5.1 throw 文とError オブジェクト
### エラーを発生させる方法
1. エラーを表すオブジェクトを用意する
  - `new Error(エラーメッセージ)`
2. エラーを発生させる
  - `throw 式` （式の部分でエラーオブジェクトを指定する）

## 5.5.2 例外をキャッチする try-catch 文

```typescript
try {
  // 処理
} catch (err) {
  // 処理
}
```

tryブロックの中で例外が発せした場合、catchブロックに処理が移る。
例外が発生しなかった場合、catchブロックは実行されない。

## 5.5.3 例外処理と大域脱出
処理の失敗を表すには主に2つの方法がある

- 例外を使う（エラーオブジェクトをthrowする）
- 失敗を表す返り値を使う（undefinedなどをreturnする）

型情報を利用するという観点では、後者のほうが優れている。
catchしたerrはunknown型であり、どんな値が入るかまったく不明のため。

例外の特徴は大域脱出にある。
大域脱出: その場で実行を中断して別の場所にプログラムの制御を移すこと

retrunでもその場で処理が終わるが、returnされた結果を受け取った以降の処理は続く。
一方、throwの場合はcatchされるまで関数の外に出ても大域脱出を続ける。

## 5.5.4 finally で脱出に割り込む
try-catchの後ろにfinallyブロックを付け加えることができる

```typescript
try {
  // 処理
} catch (err) {
  // 処理
} finally {
  // 処理
}
```

tryをcatchしなかったり、catchの中でさらに例外が発生したりしても、finallyブロック内の処理は実行される。


## コラム throwは何でも投げられる
throw 1とか。

参考: [Promiseをthrowするのはなぜ天才的デザなのか \- Qiita](https://qiita.com/uhyo/items/255760315ca61544fe33)
